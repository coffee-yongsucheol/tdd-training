
일반적인 TDD 주기는 다음과 같다.

1. 테스트를 작성한다. 마음속에 있는 오퍼레이션이 코드에 어떤 식으로 나타나길 원하는지 생각해보라. 이야기를 써내려가는 것이다. 원하는 인터페이스를 개발하라. 올바른 답을 얻기 위해 필요한 이야기의 모든 요소를 포함시켜라.
2. 실행 가능하게 만든다. 다른 무엇보다도 중요한 것은 빨리 초록 막대를 보는 것이다. 깔끔하고 단순한 해법이 명백히 보인다면 그것을 입력하라. 만약 깔끔하고 단순한 해법이 있지만 구현하는 데 몇 분 정도 걸릴 것 같으면 일단 적어 놓은 뒤에 원래 문제(초록 막대를 보는 것)로 돌아오자. 미적인 문제에 대한 이러한 전환은 몇몇 숙련된 소프트웨어 공학자들에게는 어려운 일이다. 그들은 오로지 좋은 공학적 규칙들을 따르는 방법만 알 뿐이다. 빨리 초록 막대를 보는 것은 모든 죄를 사해준다. 하지만 아주 잠시 동안만이다.

3. 올바르게 만든다. 이제 시스템이 작동하므로 직전에 저질렀던 죄악을 수습하자. 좁고 올곧은 소프트웨어 정의(software righteousness)의 길로 되돌아와서 중복을 제거하고 초록 막대로 되돌리자.


---

우리 목적
---

작동하는 깔끔한 코드를 얻는 것 -론 제프리즈-

나누어서 정복하자(divide and conquer).

먼제 '작동하는' 에 해당하는 부분을 먼저 해결하기

그러고 나서 '깔끔한 코드' 부분을 해결하는 것

'깔끔한 코드' 부분을 먼저 해결한 후에, '작동하는' 부분을 해결해 가면서 배운 것들을 설계에 반영하느라 허둥거리는 아키텍처 주도 개발 (architecture-driven development) 와 정반대이다.



---

테스트 중간 중간에 todo 작성 방식에 대해서 알아보자.

테스트를 작성할때 초록막대를 이뤄야 하는것 을 중심으로 작성해 두었다.

$5 + 10CHF = $10 (환율이 2:1일 경우)
~~$5 X 2 - $10~~
amount를 private으로 만들기
**Dollar 부작용?**
Money 반올림?


---

최대한 빨리 초록색을 보기 위해 취할 수 있는 내가 아는 전략 두가지
---

- 가짜로 구현하기 : 상수를 반환하게 만들고 진짜 코드를 얻을 때까지 단계적으로 상수를 변수로 바꾸어 간다.

- 명백한 구현 사용하기 : 실제 구현을 입력한다.


저자는 보통 실무에서 TDD를 사용할 때 두 방법을 번갈아가며 사용한다.
모든 일이 자연스럽게 잘 진행되고 내가 뭘 입력해야 할지 알 때는 명백한 구현을 계속 더해 나간다(나에게 명백한 사실이 컴퓨터에게도 명백한 사실인지 확인하기 위해 각각의 명백한 구현 사이에 테스트를 한 번씩 실행한다.)

예상치 못한 빨간 막대를 만나게 되면 뒤로 한발 물러서서 가짜로 구현하기 방법을 사용하면서 올바른 코드로 리팩토링한다.

그러다 다시 자신감을 되찾으면 명백한 구현 사용하기 모드로 돌아온다.

3장에서 보게 될 삼각측량(triangulation)이라 부르는 세 번째 방법도 있는데, 일단 지금까지 배운 것을 검토해보자.

- 설계상의 결함(Dollar 부작용)을 그 결함으로 인해 실패하는 테스트로 바꾸었다
- 스텁 구현으로 빠르게 컴파일을 통과하도록 만들었다
- 올바르다고 생각하는 코드를 입력하여 테스트를 통과했다

느낌 ( 부작용에 대한 혐오감) -> 테스트 (하나의 Dollar 객체에 곱하기를 두 번 수행하는 것)
TDD의 일반적인 주제이다.



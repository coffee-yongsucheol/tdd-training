# ch01

새로운 보고서를 생성하려면 어떤 기능들이 있어야 할까?
즉 어떤 테스트들이 있어야( 이 테스트들이 모두 통과할 경우) 보고서에 제대로 계산되도록 하는 코드가 완성됐다는 걸 확신할 수 있을까?

- 통화가 다른 두 금액을 더해서 주어진 환율에 맞게 변한 금액을 결과로 얻을 수 있어야 한다.

- 어떤 금액(주가)을 어떤 수(주식의 수)에 곱한 금액을 결과로 얻을 수 있어야 한다.

앞으로 어떤 일을 해야 하는지 알려주고, 지금 하는 일에 집중할 수 있도록 도와주며, 언제 일이 다 끝나는지 알려줄 수 있게끔 할일 목록을 작성해보자.

앞으로 할일 목록에 있는 한 항목에 대한 작업을 시작하면 그 항목을 **이런 식으로** 굵은 글시체로 나타낼 것이다. 작업을 끝낸 항목에는 줄을 긋도록 하자. 또 다른 테스트가 생각나면 할일 목록에 새로운 항목을 추가할 것이다.


만들 것을 생각했을때는 객체를 먼저 만드는게 아니라 테스트를 먼저 만들어야 한다.(저자도 항상 이사실을 되뇌는데, 계속 인지해야함)


** 오퍼레이션(operation)은 보통 메서드(method)와 비슷한 의미로 쓰이며 객체가 수행할 수 있는 연산을 의미한다. 엄격하게는 오퍼레이션에 대한 특정한 하나의 구현을 메서드라고 부른다. 언어가 다형성(polymorphism)을 지원할 경우 한 오퍼레이션은 여러 메서드를 가질 수 있다.

** 스텁 구현(stub implementation)은 메서드의 서명부와 (반환값이 있을 경우) 반환 명령만 적는 식으로 해서, 이 메서드를 호출하는 코드(이 경우엔 테스트 코드)가 컴파일 될 수 있도록 껍데기만 만들어두는 것을 말한다.


---

p46

저자가 상상할 수 있는 최소작업은

```java
int amount = 10;
```

저자는 진행을 너무 서두르지말고 리듬에 대해서 계속 상기시기면서 잊지 말라고 한다.

최소 작업 단위가 작을 수록 실패할 확률이 줄어든다.

** 리팩토링(Refactoring)이란 코드의 외적 행위는 그대로 유지하면서 내부 구조를 변경하는 작업을 뜻한다. 자세한 내용은 마틴파울러의 Refactoring 을 참고하기 바란다.


의존성을 줄여주기 위해 하는 행위
---

- TDD의 두번째 규칙을 통해서 다음 테스트로 진행하기 전에 중복을 제거함으로써, 오직 한 가지 (one and only one) 의 코드 수정을 통해 다음 테스트도 통과되게 만들 가능성을 최대화 한다.


** Once and only once, 즉 필요한 것을 하되(once) 단 한 번만 (only once) 하라는 뜻의 익스트림 프로그래밍 실천사항과 통한다. 자세한 내용은 켄트 백의 Extreme Programming Explained 를 참고하기 바람


저자 코드와 나의 코드의 차이점
---

저자는 times 메소드를 생성하여 5*2 = 10 이라는 연산 자체에 고정 값을 지정하였다.

```java
void times(int multiplier) {
  amount = 5 * 2;
}
```

하지만 나는 메소드를 생성하여 연산 식 자체를 바로 대입을 진행하였다.

```java
void times(int i) {
  this.amount = this.amount * i;
}
```

네이밍부터 하나도 신경쓰지 않았지만, 연산식을 바로 대입하는 행위와 저자가 떠올린 행위는 달랐다는 생각이 든다.
후에 나는 조금더 잘게 쪼개진 리팩토리이 이어졌다.

```java
void times(int multiplier) {
  this.amount = this.amount * multiplier;
}
```

```java
void times(int multiplier) {
  amount = amount * multiplier;
}

```

이런식으로 진행되었고 매 코드 변경시마다 테스트 코드를 실행하였다.


챕터 1에서 해낸 것들
---

- 우리가 알고 있는 작업해야 할 테스트 목록을 만들었다.
- 오퍼레이션이 외부에서 어떻게 보이길 원하는지 말해주는 이야기를 코드로 표현했다.
- JUnit에 대한 상세한 사항들은 잠시 무시하기로 했다.
- 스텁 구현을 통해 테스트를 컴파일했다.
- 끔찍한 죄악을 범하여 테스트를 통과시켰다.
- 돌아가는 코드에서 상수를 변수로 변경하여 점진적으로 일반화했다.
- 새로운 할일들을 한번에 처리하는 대신 할일 목록에 추가하고 넘어갔다.



